<?xml version="1.0"?>

<!-- 
    view.xhtml: Default view of the newsletter subscription portlet.
    
    Created:    2014-06-05 11:23 by Christian Berndt
    Modified:   2014-06-12 19:34 by Christian Berndt
    Version:    1.3
    
 -->
<f:view xmlns="http://www.w3.org/1999/xhtml"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:ui="http://java.sun.com/jsf/facelets">

	<h:head />

	<h:body styleClass="subscription-portlet">
		<h:form>

			<h:messages styleClass="messages" />

			<h:panelGrid>

				<h:panelGroup>
					<h:outputLabel for="email" value="#{i18n['email-label']}" />
					<h:inputText id="email" value="#{subscriptionController.email}"
						required="true" requiredMessage="#{i18n['email-is-required']}"
						validatorMessage="#{i18n['email-address-is-not-valid']}">

						<f:validateRegex
							pattern="^[_A-Za-z0-9-\+]+(\.[_A-Za-z0-9-]+)*@[A-Za-z0-9-]+(\.[A-Za-z0-9]+)*(\.[A-Za-z]{2,})$" />

					</h:inputText>
					<h:message for="email" />
				</h:panelGroup>

				<h:panelGroup>
					<h:outputLabel for="subscriptions"
						value="#{i18n['categories-label']}" />
					<h:selectManyListbox required="true"
						requiredMessage="#{i18n['you-must-choose-at-least-one-category']}."
						id="subscriptions"
						value="#{subscriptionController.selectedCategoryIds}">

						<f:selectItems value="#{subscriptionController.categories}"
							var="category" itemValue="#{category.categoryId}"
							itemLabel="#{category.getName(#locale)}" />

					</h:selectManyListbox>
					<h:message for="subscriptions" />
				</h:panelGroup>

				<h:panelGroup>
					<h:commandButton value="Save"
						actionListener="#{subscriptionController.saveSubscription}" action="confirmation">
						<f:ajax execute="@form" render="@form" />
					</h:commandButton>
				</h:panelGroup>

			</h:panelGrid>
		</h:form>
	</h:body>
</f:view>
